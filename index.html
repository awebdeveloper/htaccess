<!DOCTYPE html>
<!-- saved from url=(0065)http://html5slides.googlecode.com/svn/trunk/template/index.html#1 -->
<html>
	<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<title>.Htaccess - Prathik</title>

		<meta charset="utf-8">
		<meta name="description" content="Info On Htaccess" >
		<meta name="keywords" content="Htaccess,apache" >
		<meta name="author" content="Prathik Shetty" />
		<script src="slides.js" type="text/javascript"></script>
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js" type="text/javascript"></script>
		<link rel="stylesheet" type="text/css" href="styles.css"/>
		<style type="text/css"></style>
		<meta name="viewport" content="width=1100,height=750">
		<meta name="apple-mobile-web-app-capable" content="yes">
	</head>



	<body style="display: none" class="loaded">
		<section class="slides layout-regular template-io2011">
			
			<article class="next">
				<h1>.Htaccess <br>The a Magic Wand</h1><br/>
				<p>Prathik S Shetty<br>Aug 20, 2011</p>
			</article>

			<article class="far-next">
				<p>In this tutorial you will find out about the <b><i>.htaccess</i></b> file and the power it has to improve your website. 
					We will look into some use cases and examples </p><p style="padding:160px;">&nbsp;</p>
				<p><small>PS: No Original Content. No Waranty</small></p>
			</article>
			
			<article class="">
				<h2>
					Intro
				</h2>
			</article>
			
			<article class="smaller">
				<h3>
					Intro
				</h3>
				<p>
					A <span class="highlight">.htaccess</span> (hypertext access) file is a directory-level configuration file 
					supported by several web servers, that allows for decentralized management of web server configuration.
				</p>
				<p>
					The <span class="highlight">.htaccess</span> files can be used to alter the configuration of the Web 
					Server software to enable/disable additional functionality and features that the Web Server software 
					has to offer. These facilities include basic redirect functionality, for instance if a 404 file 
					not found error occurs, or for more advanced functions such as content password protection or 
					image hot link prevention. 
				</p>
				<p>
					<span class="highlight">.htaccess</span> is the filename in full, it is not a file extension. 
					For instance, you would not create a file called, <s>'file.htaccess'</s>, it is simply called, 
					'<span class="highlight">.htaccess</span>'. This file will take effect when placed in any directory 
					which is then in turn loaded via the Web Server software. The file will take effect over 
					the entire directory it is placed in and all files and subdirectories within the specified directory. 
				</p>
			</article>
			<article class="smaller">
				<h3>
					Intro
				</h3>
		
				<p>
					<span class="highlight">.htaccess</span> files must be uploaded as ASCII mode, not BINARY. 
					You may need to CHMOD the <span class="highlight">.htaccess</span> file to <i><code>644 or (RW-R--R--)</code></i>. This makes 
					the file usable by the server, but prevents it from being read by a browser, which can seriously 
					compromise your security
				</p>				
				<p> 
					You need to make sure you are allowed to use <span class="highlight">.htaccess</span> before you actually use it. 
					Some things that <span class="highlight">.htaccess</span> can do, can compromise a server configuration that has been 
					specifically setup by the admin, so don't get in trouble. 
				</p>
			</article>
			
			<article class="">
				<h2>
					Common usage
				</h2>
			</article>
			
			<article class="smaller">
				<h3>
					Common Usage
				</h3>
				<ul  class="build">
					<li>  
						<b>Authorization, authentication</b><br/>
						<span class="highlight">.htaccess</span> files are often used to specify the security restrictions for the 
						particular directory, hence the filename "access". The <span class="highlight">.htaccess</span> file 
						is often accompanied by a <small><i>.htpasswd</i></small> file which 
						stores valid usernames and their passwords.
						<br />&nbsp;
					</li>
					<li>  
						<b>Rewriting URLs</b><br/>
						Servers often use <span class="highlight">.htaccess</span> to rewrite long, overly comprehensive URLs to shorter and more memorable ones.
						<br />&nbsp;
					</li>
					<li>  
						<b>Blocking</b><br/>
						 Use allow/deny to block users by IP address or domain. Also, use to block bad bots, rippers and referrers. 
						 Often used to restrict access by Search Engine spiders.
						 <br />&nbsp;
					</li>
					<li>  
						<b>SSI</b><br/>
						 Enable server-side includes.
						 <br />&nbsp;
					</li>
				</ul>
			</article>
			<article class="smaller">
				<h3>
					Common usage
				</h3>
				<ul class="build">					
					<li>  
						<b>Directory listing </b><br/>
						Control how the server will react when no specific web page is specified.
						 <br />&nbsp;
					</li>
					<li>  
						<b>Customized error responses</b><br/>
						Changing the page that is shown when a server-side error occurs, for example HTTP 404 Not Found.
						 <br />&nbsp;
					</li>
					<li>  
						<b>MIME types </b><br/>
						 Instruct the server how to treat different varying file types.
						 <br />&nbsp;
					</li>
					<li>  
						<b>Cache Control </b><br/>
						 <span class="highlight">.htaccess</span> files allow a server to control caching by web browsers and proxies to reduce bandwidth usage, 
						 server load, and perceived lag.
						 <br />&nbsp;
					</li>
				</ul>
			</article>
			<article class="">
				<h2>
					Pros and Cons
				</h2>
			</article>
			<article class="smaller">
				<h3>
					Pros and Cons
				</h3>
				<table><tbody>
					<tr>
						<th width="50%">Pros</th>
						<th>Cons</th>
					</tr>
					<tr>
						<td><span class="green">Immediate changes</span></td>
						<td><span class="red">Performance</span></td>
					</tr>
					<tr>
						<td><span class="green">Non-privileged user Access</span></td>
						<td><span class="red">Security</span></td>
					</tr>
				</tbody></table>
				<p>
					Because <span class="highlight">.htaccess</span> files are read on every request, changes made in these files 
					take immediate effect - as opposed to the main configuration file which requires the 
					server to be restarted for the new settings to take effect. This leads to siight performace hit.
				</p>
				<p>
					For servers with multiple users, it is often desirable to allow individual users 
					the ability to alter their site configuration. The use of <span class="highlight">.htaccess</span> files allows such 
					individualization by unprivileged users - because the main server configuration files 
					do not need to be changed. 
				</p>
				
				<p>
					Hence Controlling Apache using the main server configuration file httpd.conf is often 
					preferred for security and performance reasons.
				</p>
			</article>

			<article class="">
				<h2>
					Error Responses
				</h2>
			</article>
			<article class="smaller">
				<h3>
					Error Responses
				</h3>
				<section>
					<p>
						You will probably want to create an error document for codes 404 and 500, at the least 404 
						since this would give you a chance to handle requests for pages not found. 500 would 
						help you out with internal server errors in any scripts you have running
					
<pre class="prettyprint"><span class="tag">ErrorDocument</span> 404 /errors/notfound.html
<span class="com">//This would cause any error code resulting in 404 to be forward to 
yoursite.com/errors/notfound.html</span></pre>
				</p>
				
				<p>
					If you were to use an error document handler for each of the error codes I mentioned, the 
					<span class="highlight">.htaccess</span> file would look like the following 
					(note each command is on its own line):
<pre class="prettyprint">
<span class="tag">ErrorDocument</span> 400 /errors/badrequest.html
<span class="tag">ErrorDocument</span> 401 /errors/authreqd.html
<span class="tag">ErrorDocument</span> 403 /errors/forbid.html
<span class="tag">ErrorDocument</span> 404 /errors/notfound.html
<span class="tag">ErrorDocument</span> 500 /errors/serverr.html
</pre>
				</p>
				<p>&nbsp;<br />&nbsp;<br /></p>
				<p> <marquee behavior="slide" direction="left" onmouseout="this.start();" onmouseover="this.stop();">
					<b>HTTP Error Codes :</b>
					<span class="green">100 </span><span class=blue>Continue</span>&nbsp;&nbsp;<span class="red">&hearts;</span>
					<span class="green">101 </span><span class=blue>Switching protocols</span>&nbsp;&nbsp;<span class="red">&hearts;</span>
					<span class="green">200 </span><span class=blue>Successful</span>&nbsp;&nbsp;<span class="red">&hearts;</span>
					<span class="green">201 </span><span class=blue>Created</span>&nbsp;&nbsp;<span class="red">&hearts;</span>
					<span class="green">202 </span><span class=blue>Accepted</span>&nbsp;&nbsp;<span class="red">&hearts;</span>
					<span class="green">203 </span><span class=blue>Non-authoritative information</span>&nbsp;&nbsp;<span class="red">&hearts;</span>
					<span class="green">204 </span><span class=blue>No content</span>&nbsp;&nbsp;<span class="red">&hearts;</span>
					<span class="green">205 </span><span class=blue>Reset content</span>&nbsp;&nbsp;<span class="red">&hearts;</span>
					<span class="green">206 </span><span class=blue>Partial content</span>&nbsp;&nbsp;<span class="red">&hearts;</span>
					<span class="green">300 </span><span class=blue>Multiple choices</span>&nbsp;&nbsp;<span class="red">&hearts;</span>
					<span class="green">301 </span><span class=blue>Moved permanently</span>&nbsp;&nbsp;<span class="red">&hearts;</span>
					<span class="green">302 </span><span class=blue>Moved temporarily</span>&nbsp;&nbsp;<span class="red">&hearts;</span>
					<span class="green">303 </span><span class=blue>See other location</span>&nbsp;&nbsp;<span class="red">&hearts;</span>
					<span class="green">304 </span><span class=blue>Not modified </span>&nbsp;&nbsp;<span class="red">&hearts;</span>
					<span class="green">305 </span><span class=blue>Use proxy</span>&nbsp;&nbsp;<span class="red">&hearts;</span>
					<span class="green">307 </span><span class=blue>Temporary redirect</span>&nbsp;&nbsp;<span class="red">&hearts;</span>
					<span class="green">400 </span><span class=blue>Bad request</span>&nbsp;&nbsp;<span class="red">&hearts;</span>
					<span class="green">401 </span><span class=blue>Not authorized</span>&nbsp;&nbsp;<span class="red">&hearts;</span>
					<span class="green">403 </span><span class=blue>Forbidden</span>&nbsp;&nbsp;<span class="red">&hearts;</span>
					<span class="green">404 </span><span class=blue>Not found</span>&nbsp;&nbsp;<span class="red">&hearts;</span>
					<span class="green">405 </span><span class=blue>Method not allowed</span>&nbsp;&nbsp;<span class="red">&hearts;</span>
					<span class="green">500 </span><span class=blue>Internal server error</span>&nbsp;&nbsp;<span class="red">&hearts;</span>
					<span class="green">501 </span><span class=blue>Not implemented</span>&nbsp;&nbsp;<span class="red">&hearts;</span>
					<span class="green">502 </span><span class=blue>Bad gateway</span>&nbsp;&nbsp;<span class="red">&hearts;</span>
					<span class="green">503 </span><span class=blue>Service unavailable</span>&nbsp;&nbsp;<span class="red">&hearts;</span>
					<span class="green">504 </span><span class=blue>Gateway timeout</span>&nbsp;&nbsp;<span class="red">&hearts;</span>
					<span class="green">505 </span><span class=blue>HTTP version not supported</span>&nbsp;&nbsp;		
				</marquee></p>
				</section>
			</article>
			
			<article class="smaller">
				<h3>
					Error Responses
				</h3>
				<section>
				<p>
					You can also specify HTML, believe it or not!
				<pre class="prettyprint"><span class="tag">ErrorDocument</span> 401 "&lt;body&gt; bgcolor=#ffffff>You have to actually &lt;b&gt;BE&lt;/b&gt; 
a &lt;a href='member.html' class='red'&gt;member&lt;/a&gt; to view this page, Colonel!
&lt;/body&gt;"</pre>
				</p>
				</section>
			</article>
			
			<article class="">
				<h2>
					Password Protection
				</h2>
			</article>
			
			<article class="smaller">
				<h3>
					Password Protection
				</h3>
				<section>
					<p>
						Ever wanted a specific directory in your site to be available only to people who you want 
						it to be available to? Ever got frustrated with the seeming holes in client-side options 
						for this that allowed virtually anyone with enough skill to mess around in your source to 
						get in? htaccess is the answer!
					</p>
					<p>
						<span class="highlight">.htaccess</span> is about as secure as you can or need to get 
						in everyday life, though there are ways above and beyond even that of htaccess.
					</p>
					<p>						
						The first thing you will need to do is create a password file say 
						<span class="highlight">.htpasswd</span>					
						<pre class="prettyprint"><span class="tag">htpasswd </span> /path/to/file/.htpasswd username</pre>
<pre class="terminal">
guest@ssid21:/var/www/html/ppt$ htpasswd -c /var/www/htm1/ppt/.htpasswd prath
New password:
Reâ€”type new password:
Adding password for user prath
</pre>
						<small>please note that do not use '-c' option after htpasswd command, it can 
						overwrite the old password</small>
						</p>
				</section>
			</article>
			
			<article class="smaller">
				<h3>
					Password protection
				</h3>
				<section>
					<p>						
						Now create new <span class="highlight">.htaccess</span> file inside the same folder with the following content
						<pre class="prettyprint">
<span class="tag">AuthUserFile</span> /var/www/pass/.htpasswd
<span class="tag">AuthGroupFile</span> /dev/null
<span class="tag">AuthName</span> <span class="atv">"Htaccess trial"</span>
<span class="tag">AuthType</span> <span class="atv">Basic</span>
<span class="tag">require</span> <span class="atv">valid-user</span>
</pre>
				</p>
				<ul>
					<li>The <b>AuthUserFile</b> is the full server path to your password file. </li>
					<li>The <b>AuthName</b> is the name of the area you want to access.	It could anything, </li>
					<li>The <b>AuthType</b> is either <i>Basic or Digest</i>. Use Basic for basic HTTP authentication.</li>
					<li>The <b>require user</b> is where you enter the username of those who you want to have access to that 
					portion of your site</li>
				</ul>
				</section>
			</article>
			
			<article class="">
				<h2>
					Blocking
				</h2>
			</article>			
			
			<article class="smaller">
				<h3>
					Blocking
				</h3>
				<section>
					<p>						
						Is there a pesky person perpetrating pain upon you? 
						Stalking your site from the vastness of the electron void? Blockem! 
						In your htaccess file, add the following code--changing the IPs to suit your needs--each 
						command on one line each:
						<pre class="prettyprint">
<span class="typ">order</span> <span class="atv">allow,deny</span>
<span class="typ">deny from 123.45.6.7</span> 
<span class="typ">deny from 012.34.5.</span> 
<span class="typ">allow from</span> <span class="tag">all</span>
</pre>
				</p>
			<p>You can deny access based upon IP address or an IP block.If there is a site scraping your content you 
				can block them this way.You can also set an option for<pre class="prettyprint"><span class="typ">deny from </span> <span class="tag">all</span></pre><p>
				which would of course deny everyone. You can also allow or deny by domain name rather than IP address 
				like <i>google.com</i>
			</p></p>
				</section>
			</article>
			
			<article class="smaller">
				<h3>
					Blocking
				</h3>
				<section>
					<p>						
						Blocking users or sites that originate from a particular domain is another useful trick of <span class="highlight">.htaccess</span>. 
						Blocking access by referrer in <span class="highlight">.htaccess</span> requires the help of the Apache module  mod_rewrite to make 
						out the referrer first
						<pre class="prettyprint">
<span class="tag">RewriteEngine</span> <span class="atv">on</span>
<span class="com"># Options +FollowSymlinks</span>
<span class="tag">RewriteCond</span> %{HTTP_REFERER} badsite\.com [NC,OR]
<span class="tag">RewriteCond</span> %{HTTP_REFERER} anotherbadsite\.com
<span class="tag">RewriteRule</span> .* - [F]
</pre>
				</p>
				<p>						
					Some more blocking rules<pre class="prettyprint"><span class="tag">RewriteCond</span> %{HTTP_USER_AGENT} badbot</pre>
				</p>

				</section>
			</article>
			
			<article class="">
				<h2>
					Directory Listing
				</h2>
			</article>	
			<article class="smaller">
				<h3>
					Directory Listing
				</h3>
				<section>
					<p>						
						Do you have a directory full of images or zips that you do not want people to be able to browse through?
						Typically a server is setup to prevent directory listing, but sometimes they are not. 
						If not, become self-sufficient and fix it yourself:
						<pre class="prettyprint"><span class="tag">IndexIgnore</span> *</pre>
						<p>
							The * is a wildcard that matches all files, 
							so if you stick that line into an htaccess file in your images directory, 
							nothing in that directory will be allowed to be listed.
						</p>
						<p> On the other hand, what if you did want the directory contents to be listed, 
							but only if they were HTML pages and not images? Simple says I:
						</p>
						<pre class="prettyprint"><span class="tag">IndexIgnore</span> *.gif *.jpg</pre>
						<p>This would return a list of all files not ending in .jpg or .gif, but would still list .txt, .html, etc.</p>
				</p>
				</section>
			</article>
			<article class="smaller">
				<h3>
					Directory Listing
				</h3>
				<section>
					<p>						
						And conversely, if your server is setup to prevent directory listing, but you want to 
						list the directories by default, you could simply throw this into an htaccess file the 
						directory you want displayed:
						<pre class="prettyprint"><span class="tag">Options</span> <span class="atv">+Indexes</span></pre>
						<p>
							If you do use this option, be very careful that you do not put any unintentional or 
							compromising files in this directory. And if you guessed it by the plus sign before Indexes, 
							you can throw in a minus sign <code>(Options -Indexes)</code> 
							to prevent directory listing entirely.We can also list extendend details
							like date, icon or file size of the directoty
<pre class="prettyprint">
<span class="tag">Options</span> <span class="atv">+Indexes</span>
<span class="tag">IndexOptions</span> <span class="atv">FancyIndexing</span>
</pre>
							 
						
				</p>
				</section>
			</article>

			<article class="">
				<h2>
					Redirection
				</h2>
			</article>
			<article class="smaller">
				<h3>
					Redirection
				</h3>
				<section>
					<p>						
						Ever go through the nightmare of changing portions of your site, 
						then having to deal with the problem of people finding their way from old pages to the new? It can be nasty. 
						There are different ways of redirecting pages through 
						<span class="highlight">http-equiv</span>, 
						<span class="highlight">javascript</span> or through <span class="highlight">server-side languages</span>
						but the fastest and the most effective way is <span class="highlight">.htaccess</span> 
						<pre class="prettyprint"><span class="tag">Redirect</span> /olddirectory/oldfile.html http://pickaroo.com/newfile.html </pre>
					</p>
					<p>						
						Above code does a temp. redirection. To inform the agent that you wish to do a permanent redirection use 
						<pre class="prettyprint"><span class="tag">Redirect</span> <span class="atv">Redirect</span> /olddirectory/oldfile.html http://pickaroo.com/newfile.html</pre>
					</p>
					<p>
						Each of the 4 is separated by a single space, but all on one line. You can also redirect an entire directory by simple using. 
						<pre class="prettyprint"><span class="tag">Redirect</span> /olddirectory/oldfile.html http://pickaroo.com/newfile.html </pre>
					</p>					
				</section>
			</article>
			
			<article class="smaller">
				<h3>
					Redirection
				</h3>
				<section>
					<p>
						So you want detect iPhone users on your website and redirect them to a specific page or version of your site. 
						Here is how to redirect iPhone traffic with .htaccess:
<pre class="prettyprint">
<span class="tag">RewriteEngine</span> <span class="atv">on</span>
<span class="tag">RewriteCond</span> %{HTTP_USER_AGENT} iPhone
<span class="tag">RewriteCond</span> .* http://iphone.pickaroo.com/ [R]
</pre>
					</p>
					<p>
						The code will redirect iPhone users to a iPhone specific site on <span class="highlight"> iphone.pickaroo.com </span>
						Or if you want to redirect to a sub directory of your site, ie  <span class="highlight">pickaroo.com/my-iPhone-site/</span>, you should use the following code:
<pre class="prettyprint">
<span class="tag">RewriteEngine</span> <span class="atv">on</span>
<span class="tag">RewriteCond</span> %{HTTP_USER_AGENT} iPhone
<span class="tag">RewriteCond</span> %{REQUEST_URI} !^/my-iPhone-site/ 
<span class="tag">RewriteRule</span> .* /my-iPhone-site/ [R] 
</pre>
					</p>
				</section>
			</article>
			
			<article class="">
				<h2>
					SSI & CGI
				</h2>
			</article>
			<article class="smaller">
				<h3>
					SSI & CGI
				</h3>
				<section>
					<p>						
						Many people want to use SSI, but don't seem to have the ability to do so with their current web host. 
						You can change that with htaccess.
<pre class="prettyprint">
<span class="tag">AddType</span> text/html .shtml
<span class="tag">AddHandler</span> server-parsed .shtml
<span class="tag">Options</span> <span class="atv">Indexes FollowSymLinks</span> Includes
</pre>
						<p>
							The first line tells server that pages with a <span class="highlight">.shtml </span>
							extension(Server parsed HTML) are valid.</br>
							The second line tells server that any <span class="highlight">.shtml </span>
							file should be parsed for server side commands.</br>
							The last line is just techno-junk that you should throw in there.
						</p>
						<p>
							We may wish to permit execution of 	CGI programs in a directory.
<pre class="prettyprint">
<span class="tag">Options</span> <span class="atv">+ExecCGI</span>
<span class="tag">AddHandler</span> cgi-script cgi pl
</pre>
						</p>
						<p>
							Alternately, if we wish to have all files in a given directory 
							be considered as CGI programs.
<pre class="prettyprint">
<span class="tag">Options</span> <span class="atv">+ExecCGI</span>
<span class="tag">SetHandler</span> cgi-script
</pre>
						</p>
				</p>
				</section>
			</article>	
			
						<article class="">
				<h2>
					MIME Types
				</h2>
			</article>
			<article class="smaller">
				<h3>
					MIME Types
				</h3>
				<section>
					<p>					
						What if your server wasn't set up to deliver certain file types properly? A common occurrence with 
						MP3 or even SWF files. Simple enough to fix
						<pre class="prettyprint"><span class="tag">AddType</span> application/x-shockwave-flash swf </pre>
						<p>
							<b>AddType</b> is specifying that you are adding a MIME type. The application string is the 
							MIME you are adding, and the final little bit is the default extension for the MIME type.
						</p>
						<p>
							You can force a file to be downloaded, via the Save As browser feature by using.
							<pre class="prettyprint"><span class="tag">AddType</span> application/octet-stream swf </pre>
						</p>
						<p>
							You we can change extentions and use dummy extention with this method.
							<pre class="prettyprint"><span class="tag">AddType</span> application/x-httpd-php html </pre>
						</p>
					</p>
				</section>
			</article>
			
			<article class="">
				<h2>
					Cache Control
				</h2>
			</article>
			<article class="smaller">
				<h3>
					Cache Control
				</h3>
				<section>
					<p>						
						You can use an htaccess file to control what kind of files should be cached, and for how long.
						Caching is not just for static sites, even dynamic sites can benefit from caching.
						One quick way to enable cache control headers for existing sites is to target files by extension
<pre class="prettyprint">
<span class="tag">ExpiresActive</span> <span class="atv">on</span>
<span class="tag">ExpiresDefault</span> <span class="atv">A0</span>
<span class="lit">&lt;FilesMatch</span> <span class="atv">"\.(ico|pdf|flv|jpg|jpeg|png|gif|js|css|swf)$"</span><span class="lit">&gt;</span>
<span class="tag">Header set </span> <span class="atv">set</span>Cache-Control</span> <span class="atv">"max-age=2592000, public"</span>
<span class="lit">&lt;/FilesMatch&gt;</span>
</pre>
				</p>
				</section>
			</article>	
			
			<article class="">
				<h2>
					Automate
				</h2>
			</article>			
			<article class="smaller full">
				<h3>
					Automate
				</h3>
				<div style="width:750px;height:450px;overflow:auto;">
					<table style="width:730px;margin-top:10px;font-size:15px;"  id="generatehtaccess">

						<tbody id="errors" style="background-color:#fbefc9;">
							<tr class="error" >
								<td>Error No : <input type="number" name="error[][no]" max="650" min="100" placeholder="404" list="cars"/></td>
								<td>Page : <input type="text" name="error[][page]" placeholder="pagenotfound.html" size="23"/></td>
								<td align="right"><span id="AddMoreErrors"><small>Add</small></span></td>
							</tr>
						</tbody>

						<tbody style="background-color:#DEE;" id="remoteblocking">
							<tr class="remote">
								<td>Block IP or hostname</td>
								<td>
									<input type="text" placeholder="192.168.127.21" size="31"/>
								</td>
								<td align="center">
									<div style="float:left;">
										<span><select id="generate-htaccess-remote-block">
											<option value="Allow">Allow All</option>
											<option value="Deny">Deny All</option>
										</select></span>
									</div>
									<div style="float:right;">
										<span id="AddMoreRemote" ><small>Add</small></span>
									</div>	
								</td>
							</tr>
						</tbody>
						
						<tbody id="mimes" style="background-color:#fddaf5;">
							<tr class="mime" >
								<td>Mime : <input type="text" placeholder="text/html" size="24"/></td>
								<td>Extention : <input type="text" placeholder="html5" size="18"/></td>
								<td align="right">
									<div style="float:left;">
									<select>
										<option value="AddType">AddType</option>
										<option value="AddHandler">AddHandler</option>
									</select>
									</div>
									<div style="float:right;">
										<span id="AddMoreMime" ><small>Add</small></span>
									</div>	
								</td>
							</tr>
						</tbody>
						
						<tbody id="password" style="background-color:#c9fbf6;">
							<tr>
								<td>.htpasswd Location : 
									<input type="text" id="generate-htaccess-pass-file" placeholder="/home/user/.htpasswd" size="9" />
								</td>
								<td>Realm Name : 
									<input type="text" id="generate-htaccess-pass-text" placeholder="Private Area" size="14" />
								</td>
								<td>Auth : 
									<select id="passtype" >
										<option value="basic">Basic </option>
										<option value="digest">Digest </option>
									</select>
								</td>
							</tr>
						</tbody>
	
						<tbody style="background-color:#e7fbc9;" id="redirection">
							<tr>
								<td>Old location :  
									<input type="text" id="oldpage" placeholder="index.html" size="17"/>
								</td>
								<td>New location : 
									<input type="text" id="newpage" placeholder="http://" size="14"/>
								</td>
								<td>Permanent :
									<input type="checkbox" id="perma" value="Y" />
								</td>
							</tr>
						</tbody>					
					
						<tbody style="background-color:#FED;" id="directory">
							<tr>
								<td><input type="checkbox" id="generate-htaccess-list-allow" value="Y" /> Allow Directory Listing</td>
								<td>Extentions To Ignore</td>
								<td>Index File</td>
							</tr>
							<tr>
								<td>
									<input type="checkbox" id="generate-htaccess-list-fancy" value="Y" /> Use Fancy Indexing
								</td>
								<td>
									<input type="text" id="generate-htaccess-list-extensions" placeholder="*.html *.png" size="31"/>
								</td>
								<td>
									<input type="text" id="generate-htaccess-list-indexfile" placeholder="index.php" size="10"/>
								</td>
							</tr>
						</tbody>
					</table>
				</div>
				
				<div style="text-align:center;">
					<input type="submit" value="Create It" id="generate-htaccess-submit"/>
				</div>		
			</article>
		
			<article>
				<h3>
					Bibilography
				</h3>
				<ul>
					<li>
						<a href="http://en.wikipedia.org/wiki/Htaccess">Wikipedia</a>
					</li>
					<li>
						<a href="http://httpd.apache.org/docs/2.2/howto/htaccess.html">Apache</a>
					</li>
					<li>
						<a href="http://www.vryhofresearch.com/cheatsheets/htaccess-cheat-sheet.pdf">CheatSheet</a>
					</li>
				</ul>
			</article>
			<article class="fill">
				<h3>Thank You</h3>
				<p><img src="images/cat.jpg" /></p>
				<div class="source white">Yawn   :O</div>
			</article>
			<div class="slide-area" id="prev-slide-area"></div>
			<div class="slide-area" id="next-slide-area"></div>
		</section>
		
		<script type="text/javascript">
			$(document).ready(function(){
				$('#AddMoreErrors,#AddMoreMime,#AddMoreRemote').live('click',function(){
					var newRow = $(this).closest('tr');
					$(this).closest('tr').after('<tr class="'+newRow.attr('class')+'">'+newRow.html()+'</tr>').find('span').remove();					
				});

				$('#generatehtaccess input[type=text]').live('click',function(){
					$(this).val($(this).attr('placeholder'));
				});

				/* directory listing */
				$('#generate-htaccess-submit').click(function(){
					var htaccess = '';
					if($('#generate-htaccess-list-allow').is(':checked'))
					{
						htaccess += "Options +Indexes \n";
						if($('#generate-htaccess-list-fancy').is(':checked') )
						{
							htaccess += "IndexOptions +FancyIndexing \n";
						}
						else
						{
							htaccess +="IndexOptions -FancyIndexing \n";
						}
						var ListExtensions = $('#generate-htaccess-list-extensions').val(); 
						if( ListExtensions !== "")
						{
							htaccess += "IndexIgnore "+ListExtensions+" \n";
						}
						var ListIndexFile = $('#generate-htaccess-list-indexfile').val();
						if( ListIndexFile !== "")
						{
							htaccess += "DirectoryIndex "+ListIndexFile+" \n";
						}
					}
					else
					{
						htaccess +="Options -Indexes \n";
					}
					htaccess +="\n";


					/* error handling */
					$('tr.error').each(function(){
						var ErrorNo   = $(this).find('input:first').val() ;
						var ErrorFile = $(this).find('input:last').val() ;
						var errors = new Array();
						if(ErrorNo!== "" && ErrorFile !== "" )
						{

							htaccess += "ErrorDocument"+" " +ErrorNo+" " +ErrorFile+"\n";
						}
					});	
					htaccess +="\n";


					/* password */
					var passfile = $('#generate-htaccess-pass-file').val();
					if(passfile !== "")
					{
						var passtext = $('#generate-htaccess-pass-text').val();
						if(passtext === "")
						{
							passtext = 'Private Area';
						}					

						htaccess += "AuthUserFile "+passfile+" \n"
								 +  "AuthGroupFile /dev/null"+" \n"
								 +  "AuthName \""+passtext+ "\" \n"
								 +  "AuthType "+$('#passtype').val()+" \n\n";
					}


					/* redirection */			
					var oldPage = $('#oldpage').val();
					var newPage = $('#newpage').val();
					var permaRedirect = '';
					if(newPage !== "" && oldPage !== "")
					{
						if($('#perma').is(':checked') )
						{
							permaRedirect += "permanent ";
						}
						htaccess += "Redirect "+permaRedirect+" "+oldPage+"  "+newPage+" \n\n";
					}


					/* restrict remote */
					var remoteIP   = '';			
					var remoteAll  = $('#generate-htaccess-remote-block').val().toLowerCase();
					if(remoteAll  == 'deny')
					{
						remoteEach = 'allow';
					}
					else
					{
						remoteEach = 'deny';
					}
					$('tr.remote').each(function(){
						var remote   = $(this).find('input:first').val() ;
						if(remote !== "")
						{
							remoteIP +=  remoteEach+" from "+remote+" \n"
						}
					});
					if(remoteIP !== "")
					{				
						htaccess += "order allow,deny"+"\n"+remoteIP+remoteAll+" from all"+" \n\n"				
					}
					
					/* mime type*/
					$('tr.mime').each(function(){
						var mime   = $(this).find('input:first').val() ;
						var extention = $(this).find('input:last').val() ;
						var mimes = new Array();
						if(mime!== "" && extention !== "" )
						{

							htaccess += "AddType"+" " +mime+" " +extention+"\n";
						}
					});	
					htaccess +="\n";

					alert(htaccess);
					return false;
				});
			});
		</script>
	</body></html>
